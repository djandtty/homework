Написать скрипт для CRON, который раз в час будет формировать письмо и отправлять на заданную почту.  
Часть задания про заданную почту условились опустить.  
Запись в CRON:  
`0 * * * * /home/user/script1.sh /home/user/access-4560-644067.log`  

Необходимая информация в письме:  

Список IP адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта;  
`cat access-4560-644067.log | cut -d ' ' -f 1 | sort | uniq -c | sort -nr | head`  
Список запрашиваемых URL (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта;  
`cat access-4560-644067.log | cut -d ' ' -f 7 | sort | uniq -c | sort -nr | head`  
Ошибки веб-сервера/приложения c момента последнего запуска;  
`cat access-4560-644067.log | grep error | wc -l`  
Список всех кодов HTTP ответа с указанием их кол-ва с момента последнего запуска скрипта.  
`cat access-4560-644067.log | cut -d ' ' -f 9 | sort | uniq -c`  
Скрипт должен предотвращать одновременный запуск нескольких копий, до его завершения.  

Сам скрипт:  
```
sudo nano script1.sh
#!/bin/bash

# Проверяю, передан ли аргумент
if [ $# -eq 0 ]; then
    echo "Необходимо передать файл как аргумент"
    exit 1
fi

# Блокировка
LOCKFILE="/tmp/$(basename "$0").lock"

# Использую flock для создания блокировки
exec 200>"$LOCKFILE"
flock -n 200 || {
    echo "Блокировка запуска копии скрипта - скрипт уже запущен другим процессом"
    exit 1
}

echo "Список IP адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта"
cat $1 | cut -d ' ' -f 1 | sort | uniq -c | sort -nr | head
echo "Список запрашиваемых URL (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта"
cat $1 | cut -d ' ' -f 7 | sort | uniq -c | sort -nr | head
echo "Ошибки веб-сервера/приложения c момента последнего запуска"
cat $1 | grep error | wc -l
echo "Список всех кодов HTTP ответа с указанием их кол-ва с момента последнего запуска скрипта"
cat $1 | cut -d ' ' -f 9 | sort | uniq -c
```
И даю права на исполнение:  
`sudo chmod +x script1.sh`  
Проверяю запуск:  
`./script1.sh /home/user/access-4560-644067.log`
